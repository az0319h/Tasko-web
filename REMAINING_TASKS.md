# ë‚¨ì€ ì‘ì—… ì •ë¦¬ (Remaining Tasks)

# ë“œë˜ê·¸ ì•¤ ë“œëì‹œ ë°”ë¡œ ì „ì†¡ë¨ ìˆ˜ì • í•„ìš”

## ğŸ“Š í˜„ì¬ ì§„í–‰ ìƒí™© ìš”ì•½

### âœ… ì™„ë£Œëœ ì‘ì—…

#### ë°±ì—”ë“œ (100% ì™„ë£Œ)

- **Task 1**: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° Supabase ì„¤ì •
  - ëª¨ë“  í…Œì´ë¸” ìƒì„± (projects, tasks, messages, email_logs, profiles)
  - RLS ì •ì±… êµ¬í˜„ ì™„ë£Œ
  - ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼: 21ê°œ ìƒì„±ë¨

- **Task 2**: ì´ë©”ì¼ ë°œì†¡ ì‹œìŠ¤í…œ êµ¬í˜„
  - Edge Function ì½”ë“œ ì™„ë£Œ (`supabase/functions/send-task-email/index.ts`)
  - Database Trigger êµ¬í˜„ ì™„ë£Œ (Task ìƒì„±, ìƒíƒœ ë³€ê²½ ì‹œ)
  - âš ï¸ **ë°°í¬ í•„ìš”**: Edge Function ë°°í¬ ë° í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í•„ìš”

- **Task 6**: Task ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ (ë°±ì—”ë“œ)
  - ìƒíƒœ ì „í™˜ ë¡œì§ êµ¬í˜„ ì™„ë£Œ
  - SYSTEM ë©”ì‹œì§€ ìë™ ìƒì„± íŠ¸ë¦¬ê±° ì™„ë£Œ
  - ì´ë©”ì¼ ë°œì†¡ íŠ¸ë¦¬ê±° ì™„ë£Œ

#### í”„ë¡ íŠ¸ì—”ë“œ (ëŒ€ë¶€ë¶„ ì™„ë£Œ)

- **Task 3**: í™ˆ ëŒ€ì‹œë³´ë“œ UI êµ¬í˜„ âœ…
  - í”„ë¡œì íŠ¸ ëª©ë¡ í…Œì´ë¸”
  - ê²€ìƒ‰ ê¸°ëŠ¥ (debounce)
  - í•„í„° ê¸°ëŠ¥ (ìƒíƒœ, ì •ë ¬)
  - í˜ì´ì§€ë„¤ì´ì…˜
  - í”„ë¡œì íŠ¸ ìƒì„±/ìˆ˜ì •/ì‚­ì œ

- **Task 4**: í”„ë¡œì íŠ¸ ìƒì„± ë° ê´€ë¦¬ ê¸°ëŠ¥ âœ…
  - í”„ë¡œì íŠ¸ CRUD ì™„ë£Œ
  - í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½ (í† ê¸€)
  - í”„ë¡œì íŠ¸ public/private ì „í™˜

- **Task 5**: í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ ë° Task ëª©ë¡ âœ…
  - í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ í‘œì‹œ
  - Task ëª©ë¡ í…Œì´ë¸”
  - Task ìƒì„± (Adminë§Œ ê°€ëŠ¥)
  - Task ìƒíƒœë³„ í•„í„°ë§ (Tabs)
  - Task ìˆ˜ì •/ì‚­ì œ (Adminë§Œ ê°€ëŠ¥)
  - Task ìƒíƒœ ë³€ê²½ UI

- **Task 6.5**: Task ìƒíƒœ ë³€ê²½ UI ë° ì‹¤ì‹œê°„ ë°˜ì˜ âœ…
  - ìƒíƒœ ë³€ê²½ API ì—°ê²°
  - ê¶Œí•œë³„ ë²„íŠ¼ í‘œì‹œ
  - Optimistic update

- **Task 7**: Supabase Realtime ì±„íŒ… ì‹œìŠ¤í…œ âœ…
  - ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ 
  - ì½ìŒ ì²˜ë¦¬
  - Typing Indicator
  - íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
  - ì±„íŒ… UX ê°œì„  (Enter ì „ì†¡, Shift+Enter ì¤„ë°”ê¿ˆ, íŒŒì¼ draft ê´€ë¦¬)

- **Task 8**: Task ìƒì„¸ í˜ì´ì§€ UI âœ…
  - Task ì •ë³´ í—¤ë”
  - ìƒíƒœ ë³€ê²½ ë²„íŠ¼
  - ì±„íŒ… ì˜ì—­ í†µí•©
  - ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥

---

## ğŸ”´ ë‚¨ì€ ì‘ì—… (ìš°ì„ ìˆœìœ„ ìˆœ)

### 1. Task 2: ì´ë©”ì¼ ë°œì†¡ ì‹œìŠ¤í…œ ë°°í¬ ë° ì„¤ì • (ë†’ì€ ìš°ì„ ìˆœìœ„)

**í˜„ì¬ ìƒíƒœ**: ë°±ì—”ë“œ ì½”ë“œëŠ” ì™„ë£Œë˜ì—ˆìœ¼ë‚˜ ì‹¤ì œ ë™ì‘ì„ ìœ„í•œ ë°°í¬/ì„¤ì • í•„ìš”

**í•„ìš”í•œ ì‘ì—…**:

#### 1.1 Edge Function ë°°í¬

```bash
# Supabase CLIë¡œ Edge Function ë°°í¬
supabase functions deploy send-task-email --project-ref your-project-ref
```

#### 1.2 Supabase Secrets ì„¤ì •

```bash
# SMTP ì¸ì¦ ì •ë³´ ì„¤ì •
supabase secrets set SMTP_USER=bass.to.tasko@gmail.com --project-ref your-project-ref
supabase secrets set SMTP_PASS="wavb nhjc hdig jvrd" --project-ref your-project-ref
supabase secrets set SUPABASE_URL=https://your-project-ref.supabase.co --project-ref your-project-ref
supabase secrets set SUPABASE_SERVICE_ROLE_KEY=your-service-role-key --project-ref your-project-ref
```

#### 1.3 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë³€ìˆ˜ ì„¤ì •

```sql
-- Supabase Dashboard SQL Editorì—ì„œ ì‹¤í–‰
ALTER DATABASE postgres SET app.supabase_project_ref = 'your-project-ref';
ALTER DATABASE postgres SET app.supabase_service_role_key = 'your-service-role-key';
ALTER DATABASE postgres SET app.edge_function_url = 'https://your-project-ref.supabase.co/functions/v1/send-task-email';
```

#### 1.4 pg_net í™•ì¥ í™œì„±í™” í™•ì¸

```sql
-- ì´ë¯¸ ë§ˆì´ê·¸ë ˆì´ì…˜ì— í¬í•¨ë˜ì–´ ìˆì§€ë§Œ í™•ì¸
CREATE EXTENSION IF NOT EXISTS pg_net;
```

#### 1.5 í…ŒìŠ¤íŠ¸

- Task ìƒì„± ì‹œ ì´ë©”ì¼ ë°œì†¡ í™•ì¸
- Task ìƒíƒœ ë³€ê²½ ì‹œ ì´ë©”ì¼ ë°œì†¡ í™•ì¸
- `email_logs` í…Œì´ë¸”ì—ì„œ ë°œì†¡ ë¡œê·¸ í™•ì¸

**ê´€ë ¨ íŒŒì¼**:

- `supabase/functions/send-task-email/index.ts` (ì™„ë£Œ)
- `supabase/migrations/20250101000010_create_task_status_change_trigger.sql` (ì™„ë£Œ)
- `supabase/migrations/20250101000015_create_task_insert_email_trigger.sql` (ì™„ë£Œ)
- `supabase/DEPLOYMENT_COMMANDS.md` (ë°°í¬ ê°€ì´ë“œ)

---

### 2. Task 6: Task ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ (ì¼ë¶€ ë‚¨ìŒ)

**ì™„ë£Œëœ ê²ƒ**:

- âœ… Task ìƒíƒœ ì—´ê±°í˜• ë° ìƒíƒœ ì „í™˜ ë¡œì§ (`src/lib/task-status.ts`)
- âœ… ê¶Œí•œë³„ ìƒíƒœ ë³€ê²½ ì œì–´ (`src/api/task.ts` - `updateTaskStatus`)
- âœ… ìƒíƒœ ë³€ê²½ UI ë° ì‹¤ì‹œê°„ ë°˜ì˜ (Task 6.5)
- âœ… SYSTEM ë©”ì‹œì§€ ìë™ ìƒì„± íŠ¸ë¦¬ê±° (ë°±ì—”ë“œ)

**ë‚¨ì€ ê²ƒ**:

- âš ï¸ **Task 6.3**: ì´ë©”ì¼ ìë™ ë°œì†¡ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
  - í˜„ì¬: ë°±ì—”ë“œ íŠ¸ë¦¬ê±°ëŠ” êµ¬í˜„ë¨, ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸ í•„ìš”
  - Task 2 ë°°í¬ ì™„ë£Œ í›„ í•¨ê»˜ í…ŒìŠ¤íŠ¸

---

### 3. Task 9: ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ ì‹œìŠ¤í…œ (ì¼ë¶€ ë‚¨ìŒ)

**ì™„ë£Œëœ ê²ƒ**:

- âœ… RLS ì •ì±… êµ¬í˜„ (ë°±ì—”ë“œ)
- âœ… í”„ë¡ íŠ¸ì—”ë“œ ê¶Œí•œ ì²´í¬ ë¡œì§ (`src/lib/project-permissions.ts`)
- âœ… UI ì»´í¬ë„ŒíŠ¸ ê¶Œí•œë³„ í‘œì‹œ/ìˆ¨ê¹€ (ì¼ë¶€)

**ë‚¨ì€ ê²ƒ**:

#### 3.1 ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ ë¬¸ì„œí™”

- Admin/Member ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ ëª…í™•íˆ ë¬¸ì„œí™”
- ê° ê¸°ëŠ¥ë³„ ì ‘ê·¼ ê¶Œí•œ ì •ë¦¬

#### 3.2 í†µí•© í…ŒìŠ¤íŠ¸

- Admin/Member ê³„ì •ë³„ ì „ì²´ ê¸°ëŠ¥ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
- ê¶Œí•œ ì—†ëŠ” API í˜¸ì¶œ ì°¨ë‹¨ í™•ì¸
- UI ìš”ì†Œ ê¶Œí•œë³„ í‘œì‹œ/ìˆ¨ê¹€ í†µí•© í…ŒìŠ¤íŠ¸

**ê´€ë ¨ íŒŒì¼**:

- `src/lib/project-permissions.ts` (ì¼ë¶€ ì™„ë£Œ)
- `supabase/migrations/20250101000006_create_rls_policies_projects.sql` (ì™„ë£Œ)
- `supabase/migrations/20250101000007_create_rls_policies_tasks.sql` (ì™„ë£Œ)

---

### 4. Task 10: ê²€ìƒ‰ ë° í•„í„°ë§ ì‹œìŠ¤í…œ (ì¼ë¶€ ë‚¨ìŒ)

**ì™„ë£Œëœ ê²ƒ**:

- âœ… ì‹¤ì‹œê°„ ê²€ìƒ‰ ê¸°ëŠ¥ (debounce)
- âœ… í•„í„° ì˜µì…˜ UI (ìƒíƒœ, ì •ë ¬)
- âœ… í•„í„°ë§ ë¡œì§

**ë‚¨ì€ ê²ƒ**:

#### 4.1 URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒíƒœ ê´€ë¦¬

- í˜„ì¬: ê²€ìƒ‰/í•„í„°ëŠ” ì‘ë™í•˜ì§€ë§Œ URL ìƒíƒœ ìœ ì§€ê°€ ì™„ì „í•˜ì§€ ì•ŠìŒ
- `useSearchParams`ë¥¼ ì‚¬ìš©í•˜ì—¬ URL ìƒíƒœ ê´€ë¦¬ ì™„ì „íˆ êµ¬í˜„ í•„ìš”
- ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ì‹œ ìƒíƒœ ë³µì›
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ìƒíƒœ ìœ ì§€

**ê´€ë ¨ íŒŒì¼**:

- `src/pages/index-page.tsx` (ê²€ìƒ‰/í•„í„°ëŠ” ìˆìœ¼ë‚˜ URL ìƒíƒœ ê´€ë¦¬ ì™„ì „íˆ ë¯¸ì™„ë£Œ)

---

## ğŸ“‹ ì‘ì—… ìš°ì„ ìˆœìœ„

### ğŸ”´ ë†’ì€ ìš°ì„ ìˆœìœ„ (ì¦‰ì‹œ í•„ìš”)

1. **Task 2 ë°°í¬ ë° ì„¤ì •**
   - ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ í™œì„±í™”
   - Edge Function ë°°í¬
   - Secrets ë° DB ì„¤ì • ë³€ìˆ˜ ì„¤ì •
   - í†µí•© í…ŒìŠ¤íŠ¸

### ğŸŸ¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (ê¸°ëŠ¥ ì™„ì„±)

2. **Task 10.4**: URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒíƒœ ê´€ë¦¬
   - ê²€ìƒ‰/í•„í„° ìƒíƒœë¥¼ URLì— ì €ì¥
   - ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ì§€ì›

3. **Task 9**: ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ í†µí•© í…ŒìŠ¤íŠ¸
   - ì „ì²´ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ ê²€ì¦
   - í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

### ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„ (ìµœì í™”)

4. **Task 6.3**: ì´ë©”ì¼ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
   - Task 2 ë°°í¬ í›„ í•¨ê»˜ í…ŒìŠ¤íŠ¸

---

## ğŸ“ ì£¼ìš” íŒŒì¼ ìœ„ì¹˜

### ë°±ì—”ë“œ

- ë§ˆì´ê·¸ë ˆì´ì…˜: `supabase/migrations/`
- Edge Function: `supabase/functions/send-task-email/`
- ë°°í¬ ê°€ì´ë“œ: `supabase/DEPLOYMENT_COMMANDS.md`

### í”„ë¡ íŠ¸ì—”ë“œ

- í˜ì´ì§€: `src/pages/`
- API: `src/api/`
- í›…: `src/hooks/`
- ì»´í¬ë„ŒíŠ¸: `src/components/`
- ìœ í‹¸ë¦¬í‹°: `src/lib/`

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ ìˆœì„œ

1. **Task 2 ë°°í¬ ë° ì„¤ì •** (ê°€ì¥ ì¤‘ìš”)
   - ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì´ ì‹¤ì œë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ì •
   - ë°°í¬ í›„ Task ìƒì„±/ìƒíƒœ ë³€ê²½ ì‹œ ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸

2. **Task 10.4 ì™„ë£Œ**
   - URL ìƒíƒœ ê´€ë¦¬ êµ¬í˜„
   - ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

3. **Task 9 í†µí•© í…ŒìŠ¤íŠ¸**
   - ê¶Œí•œ ì‹œìŠ¤í…œ ì „ì²´ ê²€ì¦
   - ë³´ì•ˆ ê°•í™”

4. **ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸**
   - ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
   - ì„±ëŠ¥ ìµœì í™”

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥**:
   - í˜„ì¬ ì½”ë“œëŠ” ì™„ë£Œë˜ì—ˆìœ¼ë‚˜ ë°°í¬ë˜ì§€ ì•ŠìŒ
   - Task ìƒì„±/ìƒíƒœ ë³€ê²½ ì‹œ ì´ë©”ì¼ì´ ìë™ ë°œì†¡ë˜ì§€ ì•ŠìŒ
   - Edge Function ë°°í¬ ë° ì„¤ì • í•„ìš”

2. **Storage Bucket**:
   - `task-files` bucketì€ ì´ë¯¸ ìƒì„± ë° ì„¤ì • ì™„ë£Œë¨
   - íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ì€ ì •ìƒ ë™ì‘í•¨

3. **Realtime**:
   - Supabase Dashboardì—ì„œ `messages` í…Œì´ë¸”ì˜ Realtime í™œì„±í™” í™•ì¸ í•„ìš”

4. **í™˜ê²½ ë³€ìˆ˜**:
   - `.env` íŒŒì¼ì— Supabase ê´€ë ¨ ì„¤ì • í™•ì¸ í•„ìš”
   - Edge Function Secrets ì„¤ì • í•„ìš”

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ í•„ìš”í•œ ì‘ì—…

- [ ] Edge Function ë°°í¬ (`send-task-email`)
- [ ] Supabase Secrets ì„¤ì • (SMTP_USER, SMTP_PASS, etc.)
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë³€ìˆ˜ ì„¤ì •
- [ ] ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸

### ê¸°ëŠ¥ ì™„ì„±

- [ ] URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒíƒœ ê´€ë¦¬ (Task 10.4)
- [ ] ê¶Œí•œ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸ (Task 9)

### ìµœì í™”

- [ ] ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 

---

## ğŸ“Œ ì°¸ê³  ë¬¸ì„œ

- ë°°í¬ ê°€ì´ë“œ: `supabase/DEPLOYMENT_COMMANDS.md`
- Task 7 ì™„ë£Œ ë¬¸ì„œ: `TASK_7_COMPLETE.md`
- í”„ë¡ íŠ¸ì—”ë“œ Step 2 ì™„ë£Œ ë¬¸ì„œ: `FRONTEND_STEP2_COMPLETE.md`
- ì‘ì—… ê³„íš: `.taskmaster/tasks/tasks.json`
